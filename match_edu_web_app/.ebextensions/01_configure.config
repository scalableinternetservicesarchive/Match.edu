option_settings:
  aws:elasticbeanstalk:application:environment: 
    BUNDLE_WITHOUT: test
    RACK_ENV: production
    RAILS_ENV: production
    RAILS_SKIP_ASSET_COMPILATION: false
    RAILS_SKIP_MIGRATIONS: false
    RAILS_MAX_THREADS: 10
    LOGGING: debug
  aws:rds:dbinstance:
    DBDeletionPolicy: Delete

# Install git for fetching faker
packages:
  yum:
    git: []

# Run shell commands during a deployment
container_commands:
  01_migrate:
    command: rake db:migrate
    leader_only: true
  01_db_seed:
    command: rake db:seed
    leader_only: true